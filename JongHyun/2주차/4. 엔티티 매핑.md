# 엔티티 매핑 소개

* 객체와 테이블 매핑 : `@Entity`, `@Table`
* 필드와 컬럼 매핑 : `@Column`
* 기본 키 매핑 : `@Id`
* 연관관계 매핑 : `@ManyToOne`, `@JoinColumn`

## 객체와 테이블 매핑

* `@Entity`가 붙은 클래스는 `JPA`가 관리해주며 이런 클래스를 `엔티티` 라고 한다.
* `JPA`를 사용해서 테이블과 매핑할 클래스는 `@Entity`가 필수적이다.

주의사항

 * 기본 생성자 필수(파라미터가 없는 `public` 또는 `protected` 생성자)
   - `JPA` 구현체가  리플렉싱 같은 기술들을 사용해 객체를 프록싱하는 작업들을 하기때문에 생성자가 필요하다.
 * `final` ,`enum`, `interface`, `inner` 키워드는 클래스는 사용해서는 안된다. 
 * 디비에 저장할 필드에는 `final`을 사용해서는 안된다.

코드 예시

```java

@Entity
public class Member {
    @Id
    private Long id;
    private String name;

    public Member() {}
    
}

```

> 위와 같이 클래스에 `@Entity` 에너테이션을 추가한 클래스가 엔티티 클래스가 되며 `JPA`가 이를 인식해 관리하게 된다.

## `@Entity` 속성 정리

* 속성 name
  * `JPA`에서 사용할 엔티티 이름을 지정한다.
  * 기본값으로는 클래스 이름을 그대로 사용한다.
  * 같은 클래스 이름이 없으면 가급적 기본값을 사용한다.

## `@Table`

`@Table`은 엔티티와 매핑할 테이블을 지정해준다.

| 속성                | 기능                    | 기본값           |
|-------------------|-----------------------|---------------|
| name              | 매핑할 테이블 이름            | 엔티티 이름을 사용한다. |
| catalog           | 데이터 베이스 catalog 매핑    |               |
| schema            | 데이터 베이스 schema 매핑     |               |
| uniqueConstraints | DDL 생성 시에 유니크 제약 조건 생성 |               |

# 데이터 베이스 스키마 자동 생성

* `DDL`을 애플리케이션 실행 시점에 자동 생성
  - 애플리케이션 실행 시점에 테이블을 알아서 만들어줌
* 테이블 중심 -> 객체 중심
  - 필요하면 테이블을 알아서 만들어주어서 객체 중심적인 개발이 가능하다.
* 데이터베이스 방언을 활용해서 데이터베이스에 맞는 적절한 `DDL` 생성
* 이렇게 생성된 `DDL`은 개발 장비에서만 사용해야한다.
* 생성된 `DDL`은 운영서버에서는 사용하지 않거나, 적절히 다듬은 후에 사용한다.


## 데이터베이스 스키마 자동 생성 속성

`persisitence.xml` 파일의 
`hinerbate.hbm2ddl.auto` 속성으로 데이터베이스 스키마를 어떻게 생성해줄것인지 세팅하는 속성이다.
> 예시 코드 `<property name="hinerbate.hbm2ddl.auto" value="create">`

| 옵션          | 설명                               |
|-------------|----------------------------------|
| create      | 기존테이블 삭제 후 다시 생성 (DROP + CREATE) |
| create-drop | create 와 같으나 종료시점에 테이블 DROP      |
| update      | 변경분만 반영(운영 DB에는 사용하면 안됨)         |
| validate    | 엔티티와 테이블이 정상 매핑되었는지만 확인          |
| none        | 사용하지 않음                          |

